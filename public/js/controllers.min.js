angular.module("CtrlWeatherApp",["WeatherService"]).controller("HomeController",["$scope","$location","$http","WeatherService",function(a,b,c,d){a.tags=[],void 0!=b.search().cities&&(a.tags=b.search().cities.split(",")),a.loadTags=function(a){return d.getCityData().then(function(b){var c=b;return c.filter(function(b){return-1!=b.name.toLowerCase().indexOf(a.toLowerCase())})})},a.getLocation=function(){function c(c){b.url("/weather/"+c.coords.latitude+"/"+c.coords.longitude),a.$apply()}function d(){alert("Unable to retrieve your location")}navigator.geolocation?navigator.geolocation.getCurrentPosition(c,d):alert("Geolocation is not supported by this browser.")},a.getWeather=function(){var c=[];angular.forEach(a.tags,function(a){c.push(a.name)}),b.url("/weather?cities="+c)}}]).controller("WeatherController",["$scope","$location","WeatherService","$routeParams",function(a,b,c,d){if(a.weatherData=[],a.DAYS_COUNT="14",a.UNIT="metric",void 0!=d.lat&&void 0!=d.lon)c.getWeatherForecast().query({lat:d.lat,lon:d.lon,units:a.UNIT,cnt:a.DAYS_COUNT},function(b){b.show=!1,a.weatherData.push(b)});else{var e=b.search().cities.split(",");""!=e[0]&&angular.forEach(e,function(b){c.getWeatherForecast().query({q:b,units:a.UNIT,cnt:a.DAYS_COUNT},function(b){b.show=!1,a.weatherData.push(b)})})}a.toogle=function(b){a.weatherData[b].show=!a.weatherData[b].show;for(var c=0;c<a.weatherData.length;c++)b!=c&&(a.weatherData[c].show=!1);$("html, body").animate({scrollTop:$(".detailedForecast").eq(b).offset().top},1500)},a.getIconSrc=function(a){return c.getIconImgPath(a)}}]);